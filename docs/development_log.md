# 🛠️ Development Log (개발 진행 내용)

이 문서는 프로젝트의 개발 진행 사항, 기술적 변경 내용, 주요 로직 구현 등을 날짜별로 기록합니다.

---

## 📅 2026-01-01 (프로젝트 분리 및 다중 배포 환경 구축)

### 1. 📌 문제 상황 (Problem)
- **요구 사항**: 현재 프로젝트(`Poduct-pagebuilder-kdh`)의 코드를 그대로 사용하여, **서로 다른 클라이언트(KSB, KCS)를 위한 독립적인 프로젝트**로 운영하고 싶음.
- **핵심 과제**: 
  1. 클라이언트별로 **데이터(구글 시트/드라이브)가 완벽하게 분리**되어야 함.
  2. 추후 클라이언트별로 **기능이나 디자인이 달라질 가능성**이 있어, 단순 배포 분리가 아닌 코드관리의 유연성이 필요함.
  3. 구글 앱스스크립트(Backend)와의 연결을 어떻게 효율적으로 관리할 것인가?

### 2. 💡 해결 방안 도출 과정 (Solution Selection)

| 옵션 | 방식 | 장점 | 단점 | 선택 |
| :-- | :-- | :-- | :-- | :-- |
| **Option A** | **단일 코드 + 환경변수 분기** | 코드 1벌로 여러 배포 관리 용이 (Vercel Env Vars 사용) | 클라이언트별 커스텀 요구사항 대응이 복잡함 (코드 내 `if` 분기 필요) | ❌ |
| **Option B** | **프로젝트 폴더 완전 분리** | 각 프로젝트가 독립적인 Git/Source를 가짐. 커스텀 자유도 최상 | 버그 수정 시 모든 프로젝트에 동일하게 패치해야 함 | **✅ (채택)** |

**결정 이유**: 사용자는 "카피해서 관리"를 원했으며, 향후 독자적인 기능 확장을 고려하여 **Option B(완전 분리)** 가 장기적으로 더 적합하다고 판단함.

### 3. 🚀 구현 및 적용 내용 (Implementation)

#### Phase 1: 파일 시스템 및 Git 분리
1. 로컬 환경에서 원본 프로젝트를 복제하여 2개의 별도 폴더 생성.
   - 📂 `PageGenie-KSB`
   - 📂 `PageGenie-KCS`
2. 각 폴더에서 기존 `.git`을 제거하고 **새로운 Git 저장소로 초기화** (`git init`).
   - GitHub에 각각 `PageGenie-KSB`, `PageGenie-KCS` 리포지토리 생성 및 연결.

#### Phase 2: 백엔드(GAS) 분리 및 하드코딩 설정
1. **Google Apps Script 복제**: 클라이언트별로 별도의 GAS 프로젝트 생성.
2. **코드 연결 (Hard-coding Strategy)**:
   - 각 프로젝트가 완전히 독립적이므로, 복잡한 환경변수 대신 **소스 코드 내에 전용 URL을 명시**하는 방식 채택.
   - `services/googleSheetService.ts` 내 `DEFAULT_GAS_URL` 상수를 각 프로젝트 전용 URL로 수정 (`sed` 명령어 활용).
   - **이점**: Vercel 설정 실수로 엉뚱한 DB에 연결될 위험을 원천 차단.

#### Phase 3: 데이터 저장 구조 개선 (구글 드라이브)
- **문제**: 기존에는 생성된 이미지/HTML이 내 드라이브 최상위(Root) 폴더에 난립하여 관리가 어려움.
- **해결**: `GOOGLE_APPS_SCRIPT_CODE.js` 수정.
  - **계층 구조 적용**: `PageGenie_Data` (통합 폴더) -> `[날짜] 상품명` (개별 폴더) -> 이미지 파일들.
  - 이제 모든 생성 파일은 자동으로 `PageGenie_Data` 폴더 안으로 정리됨.

### 4. 📝 교훈 및 가이드 (Lessons Learned)
이와 같은 "솔루션 납품형" 프로젝트를 진행할 때의 모범 사례:

1. **폴더 구조가 깡패다**: 비슷해 보인다고 억지로 코드 하나로 묶으려 하지 말고, **운영 주체가 다르면 프로젝트도 찢는 것(Fork)** 이 정신 건강에 이롭다.
2. **URL 하드코딩의 재발견**: 보통 URL은 환경변수로 빼는 게 정석이지만, 아예 소스코드가 분리된 경우에는 **코드에 박아넣는 것이 "배포 사고(A업체 데이터를 B업체에 저장)"를 막는 가장 확실한 안전장치**가 된다.
3. **백엔드(GAS)는 로직 복사만**: 백엔드 로직은 공통 파일(`GOOGLE_APPS_SCRIPT_CODE.js`) 하나로 관리하고, 배포 시에만 복사+붙여넣기 하는 식이 유지보수에 유리하다.

---

## 📅 2024-12-31
(기존 내용 유지...)
